version: '3'
services:

  registry-app:
    image: registry
    ports:
      - "9010-9020:9090"
      - "9030-9040:9091"
    depends_on:
      - mysql-dev
    links:
      - mysql-dev
    environment:
      DB_TYPE: mysql
      DATA_SRC_CLASS_NAME: com.mysql.jdbc.jdbc2.optional.MysqlDataSource
      DB_URL: jdbc:mysql://mysql-dev/schema_registry
      DB_NAME: schema_registry
      DB_USER: appuser
      DB_PASSWORD: password
      DB_HOST: mysql-dev
#    volumes:
#      - "./logs:$REGISTRY_HOME/logs:rw"

  mysql-dev:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: schema_registry
      MYSQL_USER: appuser
      MYSQL_PASSWORD: password
    ports:
      - "3308:3306"
    volumes:
      - "./mysql_data:/var/lib/mysql:rw"
